[gd_resource type="Resource" load_steps=2 format=2]

[ext_resource path="res://addons/dialogue_manager/dialogue_resource.gd" type="Script" id=1]

[resource]
script = ExtResource( 1 )
syntax_version = 2
raw_text = "~ first_visit

An ordinary dorm is found, decorated in red and yellow colours.
{{RED}}: {{GREEN}}! Are you alright?
{{GREEN}}: Yes. What about you?
{{RED}}: I'm fine, just a bit shaken up. First, the {{PRINCIPAL}} called staff to the {{GREAT_HALL}} and {{RED_TEACHER}} told me to join. After that horrible trial-like event, the {{CARETAKER}} sent all students back to their dorms.
if has_ouroboros and not red_joined
	=> request
else
	{{GREEN}}: Glad to know you are safe. Unfortunately, I need to get going.
	{{RED}}: See you around.
- Leave => dorm_wing_entrance

~ visit

if has_ouroboros and not red_joined
	=> request
else
	{{GREEN}} is at {{RED}}'s dorm.
	- Leave => dorm_wing_entrance

~ execute_action

No problems here.
set next = current_room

~ dorm_wing_entrance
{{GREEN}} leaves the dorm.
set next = \"dorm_wing_entrance\"

~ request

{{GREEN}} takes a seat with {{RED}}.
{{GREEN}}: Could I ask you to lend me a hand with some fire spells?
if talked_to_red
	{{RED}}: Yes, I remember you asked me back at the classroom. What would you like me to do?
else
	{{RED}}: Now? Outside of class?
	{{GREEN}}: Please, {{RED}}. It is important.
	{{RED}}: You know I am not fond of being as adventurous as you are. Is it very important?
	{{GREEN}}: Truely!
	{{RED}} is encouraged by {{GREEN}}'s words.
	{{RED}}: Okay, show me.
{{GREEN}}: Apparently, there is an alternate dimension with this school in it. It is important that we go to the library in that dimension and and use a strong fire spell there.
{{RED}} has a hard time to follow.
{{GREEN}}: Oh, maybe I went a bit too fast through that.
{{RED}}: Yes. I have no idea what you're talking about.
if yellow_joined
	{{YELLOW}} appears out of nowhere.
	{{YELLOW}}: You got me. This is a wild story!
	{{RED}}: Oh? Who are you?
	{{GREEN}}: {{YELLOW}} is helping me too.
{{GREEN}}: How about I take you to that dimension first?
{{RED}}: I am not against going for a little walk. Today has been far too eventful for me to focus as usual.
set red_joined = true
{{RED}} joins {{GREEN}}'s team
set next = current_room
"
errors = [  ]
titles = {
"dorm_wing_entrance": "27",
"execute_action": "23",
"first_visit": "2",
"request": "32",
"visit": "15"
}
lines = {
"0": {
"next_id": "2",
"text": "first_visit",
"type": "title"
},
"10": {
"character": "{{RED}}",
"character_replacements": [ {
"expression": [ {
"type": "variable",
"value": "RED"
} ],
"value_in_text": "{{RED}}"
} ],
"inline_mutations": [  ],
"next_id": "11",
"parent_id": "8",
"pauses": {
},
"replacements": [  ],
"speeds": [  ],
"text": "See you around.",
"time": null,
"translation_key": "See you around.",
"type": "dialogue"
},
"11": {
"next_id": "27",
"next_id_after": "end",
"replacements": [  ],
"responses": PoolStringArray( "11" ),
"text": "Leave",
"translation_key": "Leave",
"type": "response"
},
"13": {
"next_id": "15",
"text": "visit",
"type": "title"
},
"15": {
"condition": {
"expression": [ {
"type": "variable",
"value": "has_ouroboros"
}, {
"type": "and_or",
"value": "and"
}, {
"type": "not"
}, {
"type": "variable",
"value": "red_joined"
} ]
},
"next_conditional_id": "17",
"next_id": "16",
"next_id_after": "end",
"type": "condition"
},
"16": {
"next_id": "32",
"parent_id": "15",
"type": "goto"
},
"17": {
"next_conditional_id": "end",
"next_id": "18",
"next_id_after": "end",
"type": "condition"
},
"18": {
"character": "",
"inline_mutations": [  ],
"next_id": "19",
"parent_id": "17",
"pauses": {
},
"replacements": [ {
"expression": [ {
"type": "variable",
"value": "GREEN"
} ],
"value_in_text": "{{GREEN}}"
}, {
"expression": [ {
"type": "variable",
"value": "RED"
} ],
"value_in_text": "{{RED}}"
} ],
"speeds": [  ],
"text": "{{GREEN}} is at {{RED}}'s dorm.",
"time": null,
"translation_key": "{{GREEN}} is at {{RED}}'s dorm.",
"type": "dialogue"
},
"19": {
"next_id": "27",
"next_id_after": "end",
"parent_id": "17",
"replacements": [  ],
"responses": PoolStringArray( "19" ),
"text": "Leave",
"translation_key": "Leave",
"type": "response"
},
"2": {
"character": "",
"inline_mutations": [  ],
"next_id": "3",
"pauses": {
},
"replacements": [  ],
"speeds": [  ],
"text": "An ordinary dorm is found, decorated in red and yellow colours.",
"time": null,
"translation_key": "An ordinary dorm is found, decorated in red and yellow colours.",
"type": "dialogue"
},
"21": {
"next_id": "23",
"text": "execute_action",
"type": "title"
},
"23": {
"character": "",
"inline_mutations": [  ],
"next_id": "24",
"pauses": {
},
"replacements": [  ],
"speeds": [  ],
"text": "No problems here.",
"time": null,
"translation_key": "No problems here.",
"type": "dialogue"
},
"24": {
"mutation": {
"expression": [ {
"type": "variable",
"value": "next"
}, {
"type": "assignment",
"value": "="
}, {
"type": "variable",
"value": "current_room"
} ]
},
"next_id": "",
"type": "mutation"
},
"26": {
"next_id": "27",
"text": "dorm_wing_entrance",
"type": "title"
},
"27": {
"character": "",
"inline_mutations": [  ],
"next_id": "28",
"pauses": {
},
"replacements": [ {
"expression": [ {
"type": "variable",
"value": "GREEN"
} ],
"value_in_text": "{{GREEN}}"
} ],
"speeds": [  ],
"text": "{{GREEN}} leaves the dorm.",
"time": null,
"translation_key": "{{GREEN}} leaves the dorm.",
"type": "dialogue"
},
"28": {
"mutation": {
"expression": [ {
"type": "variable",
"value": "next"
}, {
"type": "assignment",
"value": "="
}, {
"type": "string",
"value": "dorm_wing_entrance"
} ]
},
"next_id": "",
"type": "mutation"
},
"3": {
"character": "{{RED}}",
"character_replacements": [ {
"expression": [ {
"type": "variable",
"value": "RED"
} ],
"value_in_text": "{{RED}}"
} ],
"inline_mutations": [  ],
"next_id": "4",
"pauses": {
},
"replacements": [ {
"expression": [ {
"type": "variable",
"value": "GREEN"
} ],
"value_in_text": "{{GREEN}}"
} ],
"speeds": [  ],
"text": "{{GREEN}}! Are you alright?",
"time": null,
"translation_key": "{{GREEN}}! Are you alright?",
"type": "dialogue"
},
"30": {
"next_id": "32",
"text": "request",
"type": "title"
},
"32": {
"character": "",
"inline_mutations": [  ],
"next_id": "33",
"pauses": {
},
"replacements": [ {
"expression": [ {
"type": "variable",
"value": "GREEN"
} ],
"value_in_text": "{{GREEN}}"
}, {
"expression": [ {
"type": "variable",
"value": "RED"
} ],
"value_in_text": "{{RED}}"
} ],
"speeds": [  ],
"text": "{{GREEN}} takes a seat with {{RED}}.",
"time": null,
"translation_key": "{{GREEN}} takes a seat with {{RED}}.",
"type": "dialogue"
},
"33": {
"character": "{{GREEN}}",
"character_replacements": [ {
"expression": [ {
"type": "variable",
"value": "GREEN"
} ],
"value_in_text": "{{GREEN}}"
} ],
"inline_mutations": [  ],
"next_id": "34",
"pauses": {
},
"replacements": [  ],
"speeds": [  ],
"text": "Could I ask you to lend me a hand with some fire spells?",
"time": null,
"translation_key": "Could I ask you to lend me a hand with some fire spells?",
"type": "dialogue"
},
"34": {
"condition": {
"expression": [ {
"type": "variable",
"value": "talked_to_red"
} ]
},
"next_conditional_id": "36",
"next_id": "35",
"next_id_after": "43",
"type": "condition"
},
"35": {
"character": "{{RED}}",
"character_replacements": [ {
"expression": [ {
"type": "variable",
"value": "RED"
} ],
"value_in_text": "{{RED}}"
} ],
"inline_mutations": [  ],
"next_id": "43",
"parent_id": "34",
"pauses": {
},
"replacements": [  ],
"speeds": [  ],
"text": "Yes, I remember you asked me back at the classroom. What would you like me to do?",
"time": null,
"translation_key": "Yes, I remember you asked me back at the classroom. What would you like me to do?",
"type": "dialogue"
},
"36": {
"next_conditional_id": "43",
"next_id": "37",
"next_id_after": "43",
"type": "condition"
},
"37": {
"character": "{{RED}}",
"character_replacements": [ {
"expression": [ {
"type": "variable",
"value": "RED"
} ],
"value_in_text": "{{RED}}"
} ],
"inline_mutations": [  ],
"next_id": "38",
"parent_id": "36",
"pauses": {
},
"replacements": [  ],
"speeds": [  ],
"text": "Now? Outside of class?",
"time": null,
"translation_key": "Now? Outside of class?",
"type": "dialogue"
},
"38": {
"character": "{{GREEN}}",
"character_replacements": [ {
"expression": [ {
"type": "variable",
"value": "GREEN"
} ],
"value_in_text": "{{GREEN}}"
} ],
"inline_mutations": [  ],
"next_id": "39",
"parent_id": "36",
"pauses": {
},
"replacements": [ {
"expression": [ {
"type": "variable",
"value": "RED"
} ],
"value_in_text": "{{RED}}"
} ],
"speeds": [  ],
"text": "Please, {{RED}}. It is important.",
"time": null,
"translation_key": "Please, {{RED}}. It is important.",
"type": "dialogue"
},
"39": {
"character": "{{RED}}",
"character_replacements": [ {
"expression": [ {
"type": "variable",
"value": "RED"
} ],
"value_in_text": "{{RED}}"
} ],
"inline_mutations": [  ],
"next_id": "40",
"parent_id": "36",
"pauses": {
},
"replacements": [  ],
"speeds": [  ],
"text": "You know I am not fond of being as adventurous as you are. Is it very important?",
"time": null,
"translation_key": "You know I am not fond of being as adventurous as you are. Is it very important?",
"type": "dialogue"
},
"4": {
"character": "{{GREEN}}",
"character_replacements": [ {
"expression": [ {
"type": "variable",
"value": "GREEN"
} ],
"value_in_text": "{{GREEN}}"
} ],
"inline_mutations": [  ],
"next_id": "5",
"pauses": {
},
"replacements": [  ],
"speeds": [  ],
"text": "Yes. What about you?",
"time": null,
"translation_key": "Yes. What about you?",
"type": "dialogue"
},
"40": {
"character": "{{GREEN}}",
"character_replacements": [ {
"expression": [ {
"type": "variable",
"value": "GREEN"
} ],
"value_in_text": "{{GREEN}}"
} ],
"inline_mutations": [  ],
"next_id": "41",
"parent_id": "36",
"pauses": {
},
"replacements": [  ],
"speeds": [  ],
"text": "Truely!",
"time": null,
"translation_key": "Truely!",
"type": "dialogue"
},
"41": {
"character": "",
"inline_mutations": [  ],
"next_id": "42",
"parent_id": "36",
"pauses": {
},
"replacements": [ {
"expression": [ {
"type": "variable",
"value": "RED"
} ],
"value_in_text": "{{RED}}"
}, {
"expression": [ {
"type": "variable",
"value": "GREEN"
} ],
"value_in_text": "{{GREEN}}"
} ],
"speeds": [  ],
"text": "{{RED}} is encouraged by {{GREEN}}'s words.",
"time": null,
"translation_key": "{{RED}} is encouraged by {{GREEN}}'s words.",
"type": "dialogue"
},
"42": {
"character": "{{RED}}",
"character_replacements": [ {
"expression": [ {
"type": "variable",
"value": "RED"
} ],
"value_in_text": "{{RED}}"
} ],
"inline_mutations": [  ],
"next_id": "43",
"parent_id": "36",
"pauses": {
},
"replacements": [  ],
"speeds": [  ],
"text": "Okay, show me.",
"time": null,
"translation_key": "Okay, show me.",
"type": "dialogue"
},
"43": {
"character": "{{GREEN}}",
"character_replacements": [ {
"expression": [ {
"type": "variable",
"value": "GREEN"
} ],
"value_in_text": "{{GREEN}}"
} ],
"inline_mutations": [  ],
"next_id": "44",
"pauses": {
},
"replacements": [  ],
"speeds": [  ],
"text": "Apparently, there is an alternate dimension with this school in it. It is important that we go to the library in that dimension and and use a strong fire spell there.",
"time": null,
"translation_key": "Apparently, there is an alternate dimension with this school in it. It is important that we go to the library in that dimension and and use a strong fire spell there.",
"type": "dialogue"
},
"44": {
"character": "",
"inline_mutations": [  ],
"next_id": "45",
"pauses": {
},
"replacements": [ {
"expression": [ {
"type": "variable",
"value": "RED"
} ],
"value_in_text": "{{RED}}"
} ],
"speeds": [  ],
"text": "{{RED}} has a hard time to follow.",
"time": null,
"translation_key": "{{RED}} has a hard time to follow.",
"type": "dialogue"
},
"45": {
"character": "{{GREEN}}",
"character_replacements": [ {
"expression": [ {
"type": "variable",
"value": "GREEN"
} ],
"value_in_text": "{{GREEN}}"
} ],
"inline_mutations": [  ],
"next_id": "46",
"pauses": {
},
"replacements": [  ],
"speeds": [  ],
"text": "Oh, maybe I went a bit too fast through that.",
"time": null,
"translation_key": "Oh, maybe I went a bit too fast through that.",
"type": "dialogue"
},
"46": {
"character": "{{RED}}",
"character_replacements": [ {
"expression": [ {
"type": "variable",
"value": "RED"
} ],
"value_in_text": "{{RED}}"
} ],
"inline_mutations": [  ],
"next_id": "47",
"pauses": {
},
"replacements": [  ],
"speeds": [  ],
"text": "Yes. I have no idea what you're talking about.",
"time": null,
"translation_key": "Yes. I have no idea what you're talking about.",
"type": "dialogue"
},
"47": {
"condition": {
"expression": [ {
"type": "variable",
"value": "yellow_joined"
} ]
},
"next_conditional_id": "52",
"next_id": "48",
"next_id_after": "52",
"type": "condition"
},
"48": {
"character": "",
"inline_mutations": [  ],
"next_id": "49",
"parent_id": "47",
"pauses": {
},
"replacements": [ {
"expression": [ {
"type": "variable",
"value": "YELLOW"
} ],
"value_in_text": "{{YELLOW}}"
} ],
"speeds": [  ],
"text": "{{YELLOW}} appears out of nowhere.",
"time": null,
"translation_key": "{{YELLOW}} appears out of nowhere.",
"type": "dialogue"
},
"49": {
"character": "{{YELLOW}}",
"character_replacements": [ {
"expression": [ {
"type": "variable",
"value": "YELLOW"
} ],
"value_in_text": "{{YELLOW}}"
} ],
"inline_mutations": [  ],
"next_id": "50",
"parent_id": "47",
"pauses": {
},
"replacements": [  ],
"speeds": [  ],
"text": "You got me. This is a wild story!",
"time": null,
"translation_key": "You got me. This is a wild story!",
"type": "dialogue"
},
"5": {
"character": "{{RED}}",
"character_replacements": [ {
"expression": [ {
"type": "variable",
"value": "RED"
} ],
"value_in_text": "{{RED}}"
} ],
"inline_mutations": [  ],
"next_id": "6",
"pauses": {
},
"replacements": [ {
"expression": [ {
"type": "variable",
"value": "PRINCIPAL"
} ],
"value_in_text": "{{PRINCIPAL}}"
}, {
"expression": [ {
"type": "variable",
"value": "GREAT_HALL"
} ],
"value_in_text": "{{GREAT_HALL}}"
}, {
"expression": [ {
"type": "variable",
"value": "RED_TEACHER"
} ],
"value_in_text": "{{RED_TEACHER}}"
}, {
"expression": [ {
"type": "variable",
"value": "CARETAKER"
} ],
"value_in_text": "{{CARETAKER}}"
} ],
"speeds": [  ],
"text": "I'm fine, just a bit shaken up. First, the {{PRINCIPAL}} called staff to the {{GREAT_HALL}} and {{RED_TEACHER}} told me to join. After that horrible trial-like event, the {{CARETAKER}} sent all students back to their dorms.",
"time": null,
"translation_key": "I'm fine, just a bit shaken up. First, the {{PRINCIPAL}} called staff to the {{GREAT_HALL}} and {{RED_TEACHER}} told me to join. After that horrible trial-like event, the {{CARETAKER}} sent all students back to their dorms.",
"type": "dialogue"
},
"50": {
"character": "{{RED}}",
"character_replacements": [ {
"expression": [ {
"type": "variable",
"value": "RED"
} ],
"value_in_text": "{{RED}}"
} ],
"inline_mutations": [  ],
"next_id": "51",
"parent_id": "47",
"pauses": {
},
"replacements": [  ],
"speeds": [  ],
"text": "Oh? Who are you?",
"time": null,
"translation_key": "Oh? Who are you?",
"type": "dialogue"
},
"51": {
"character": "{{GREEN}}",
"character_replacements": [ {
"expression": [ {
"type": "variable",
"value": "GREEN"
} ],
"value_in_text": "{{GREEN}}"
} ],
"inline_mutations": [  ],
"next_id": "52",
"parent_id": "47",
"pauses": {
},
"replacements": [ {
"expression": [ {
"type": "variable",
"value": "YELLOW"
} ],
"value_in_text": "{{YELLOW}}"
} ],
"speeds": [  ],
"text": "{{YELLOW}} is helping me too.",
"time": null,
"translation_key": "{{YELLOW}} is helping me too.",
"type": "dialogue"
},
"52": {
"character": "{{GREEN}}",
"character_replacements": [ {
"expression": [ {
"type": "variable",
"value": "GREEN"
} ],
"value_in_text": "{{GREEN}}"
} ],
"inline_mutations": [  ],
"next_id": "53",
"pauses": {
},
"replacements": [  ],
"speeds": [  ],
"text": "How about I take you to that dimension first?",
"time": null,
"translation_key": "How about I take you to that dimension first?",
"type": "dialogue"
},
"53": {
"character": "{{RED}}",
"character_replacements": [ {
"expression": [ {
"type": "variable",
"value": "RED"
} ],
"value_in_text": "{{RED}}"
} ],
"inline_mutations": [  ],
"next_id": "54",
"pauses": {
},
"replacements": [  ],
"speeds": [  ],
"text": "I am not against going for a little walk. Today has been far too eventful for me to focus as usual.",
"time": null,
"translation_key": "I am not against going for a little walk. Today has been far too eventful for me to focus as usual.",
"type": "dialogue"
},
"54": {
"mutation": {
"expression": [ {
"type": "variable",
"value": "red_joined"
}, {
"type": "assignment",
"value": "="
}, {
"type": "bool",
"value": true
} ]
},
"next_id": "55",
"type": "mutation"
},
"55": {
"character": "",
"inline_mutations": [  ],
"next_id": "56",
"pauses": {
},
"replacements": [ {
"expression": [ {
"type": "variable",
"value": "RED"
} ],
"value_in_text": "{{RED}}"
}, {
"expression": [ {
"type": "variable",
"value": "GREEN"
} ],
"value_in_text": "{{GREEN}}"
} ],
"speeds": [  ],
"text": "{{RED}} joins {{GREEN}}'s team",
"time": null,
"translation_key": "{{RED}} joins {{GREEN}}'s team",
"type": "dialogue"
},
"56": {
"mutation": {
"expression": [ {
"type": "variable",
"value": "next"
}, {
"type": "assignment",
"value": "="
}, {
"type": "variable",
"value": "current_room"
} ]
},
"next_id": "",
"type": "mutation"
},
"6": {
"condition": {
"expression": [ {
"type": "variable",
"value": "has_ouroboros"
}, {
"type": "and_or",
"value": "and"
}, {
"type": "not"
}, {
"type": "variable",
"value": "red_joined"
} ]
},
"next_conditional_id": "8",
"next_id": "7",
"next_id_after": "11",
"type": "condition"
},
"7": {
"next_id": "32",
"parent_id": "6",
"type": "goto"
},
"8": {
"next_conditional_id": "11",
"next_id": "9",
"next_id_after": "11",
"type": "condition"
},
"9": {
"character": "{{GREEN}}",
"character_replacements": [ {
"expression": [ {
"type": "variable",
"value": "GREEN"
} ],
"value_in_text": "{{GREEN}}"
} ],
"inline_mutations": [  ],
"next_id": "10",
"parent_id": "8",
"pauses": {
},
"replacements": [  ],
"speeds": [  ],
"text": "Glad to know you are safe. Unfortunately, I need to get going.",
"time": null,
"translation_key": "Glad to know you are safe. Unfortunately, I need to get going.",
"type": "dialogue"
}
}
